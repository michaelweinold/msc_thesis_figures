\documentclass[crop,tikz]{standalone}

\usepackage{../../../supplementary/header/header_pgfplot_standalone}

\pgfplotsset{compat=newest,
			xtick pos=left,
			ytick pos=left
			}
			
\pgfdeclarelayer{foreground}
\pgfdeclarelayer{background}
\pgfsetlayers{background,main,foreground}

\begin{document}
\begin{tikzpicture}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{axis}[
%Grouping
	name=main,
	at={(0,0)},
%Domain
	xmin=2000, xmax=2020,
	ymin=2.55, ymax=4,
%Size
	width=10cm,
	height=7cm,
%Ticks
	xtick distance=2,
	minor x tick num=1,
	/pgf/number format/1000 sep={},
%Axis Labels
	ylabel style = {align=center},
	ylabel=Forward Voltage \text{[}V\text{]} at 350mA,
%Legend
	legend pos=south west,
	legend entries={Classical, TFFC (top electr.) , TFFC (buried electr.), FC, CSP-FC},
	legend cell align={left},
	%legend style={draw=none},
]
\addplot [red,only marks]
	table [col sep=comma, x=year, y=vf]
	{../data/lateral.csv};
\addplot [orange,only marks,mark=o]
	table [col sep=comma, x=year, y=vf]
	{../data/tffc-top.csv};
\addplot [orange,only marks]
	table [col sep=comma, x=year, y=vf]
	{../data/tffc-buried.csv};
\addplot [blue,only marks]
	table [col sep=comma, x=year, y=vf]
	{../data/fc.csv};
\addplot [teal,only marks]
	table [col sep=comma, x=year, y=vf]
	{../data/fc-csp.csv};
\addplot [domain=2000:2020] {2.67};
\begin{pgfonlayer}{foreground}
	\node[above,fill=white] at (2014.5,2.57) {$V_f\text{ideal}$ at $\lambda=450$nm};
\end{pgfonlayer}
\node[above,fill=white] at (2018.8,3.85) {2020};
\end{axis}

\begin{axis}[
%Grouping
	name=inset,
	at={(main.west)},
	xshift=5.95cm,
	yshift=1.95cm,
	anchor=west,
%Size
	height=3cm,
	width=4cm,
%Domain
	ymin=2.7, ymax=3.2,
%Ticks
	ytick={2.8,2.9,3,3.1},
	symbolic x coords={LG Innotek, Seoul Semi, Samsung, Osram, Lumileds},
    xtick=data,
    xticklabel style={rotate=-90},
]
\addplot [teal, only marks]
	table [col sep=comma, x=company, y=csp]
	{../data/companies_2020-abs.csv};
\addplot [orange, only marks]
	table [col sep=comma, x=company, y=tffc]
	{../data/companies_2020-abs.csv};
\end{axis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{tikzpicture}
\end{document}
